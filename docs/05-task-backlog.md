# タスクバックログ

## 1. Sprint計画（案）

| Sprint | 期間 | 目標 |
|--------|------|------|
| Sprint 1 | 1-2週間 | 基盤構築・入力処理 |
| Sprint 2 | 1-2週間 | FB生成・LLM連携 |
| Sprint 3 | 1週間 | Slack連携 |
| Sprint 4 | 1週間 | 統合・テスト・運用準備 |

---

## 2. タスク一覧

### 2.1 インフラ・準備

| ID | タスク | 優先度 | 見積 | Sprint | 状態 |
|----|--------|--------|------|--------|------|
| T-001 | リポジトリ初期化・ディレクトリ作成 | 高 | 0.5d | 1 | **完了** |
| T-002 | reference/pss/ の作成・PSSマニュアル格納 | 高 | 0.5d | 1 | **完了** |
| T-003 | reference/operations/ の作成・オペレーションマニュアル格納 | 高 | 0.5d | 1 | **完了** |
| T-004 | 環境変数テンプレート .env.example 作成 | 中 | 0.25d | 1 | **完了** |
| T-005 | requirements.txt 作成 | 高 | 0.25d | 1 | **完了** |

### 2.2 入力処理

| ID | タスク | 優先度 | 見積 | Sprint | 状態 |
|----|--------|--------|------|--------|------|
| T-010 | 書き起こしファイル読み込みモジュール | 高 | 0.5d | 1 | **完了** |
| T-011 | 複数形式（txt/md）対応 | 中 | 0.25d | 1 | **完了** |
| T-012 | 参照ドキュメント（PSS・オペレーション）読み込みモジュール | 高 | 0.5d | 1 | **完了** |

### 2.3 FB生成

| ID | タスク | 優先度 | 見積 | Sprint | 状態 |
|----|--------|--------|------|--------|------|
| T-020 | プロンプトテンプレート設計 | 高 | 0.5d | 2 | **完了** |
| T-021 | プロンプト構築ロジック（書き起こし+参照+テンプレート） | 高 | 0.5d | 2 | **完了** |
| T-022 | LLM API 連携（OpenAI / Anthropic） | 高 | 1d | 2 | **完了** |
| T-023 | FB出力の構造化（良い点・改善点・ニーズ・6カテゴリ・年収相場・障壁・総評・残論点） | 高 | 0.5d | 2 | **完了** |
| T-024 | エラーハンドリング・リトライ | 中 | 0.25d | 2 | **完了**（フォールバックFBあり） |

### 2.4 Slack連携

| ID | タスク | 優先度 | 見積 | Sprint | 状態 |
|----|--------|--------|------|--------|------|
| T-030 | Slack Bot 作成・トークン取得 | 高 | 0.5d | 3 | **完了** |
| T-031 | Slack API 送信モジュール（chat.postMessage / Webhook） | 高 | 0.5d | 3 | **完了** |
| T-032 | 送信先チャンネル/ユーザー設定 | 高 | 0.25d | 3 | **完了** |
| T-033 | FBのMarkdown → Slack mrkdwn 変換 | 中 | 0.25d | 3 | **完了** |
| T-034 | 送信失敗時のリトライ・通知 | 中 | 0.25d | 3 | **完了** |

### 2.5 Slack /fb スラッシュコマンド（追加）

| ID | タスク | 優先度 | 見積 | Sprint | 状態 |
|----|--------|--------|------|--------|------|
| T-035 | Slack Bolt アプリ（/fb スラッシュコマンド） | 高 | 1d | 3 | **完了** |
| T-036 | Socket Mode 対応・App-Level Token | 高 | 0.5d | 3 | **完了** |
| T-037 | モーダルUI（書き起こし入力→FB生成） | 高 | 0.5d | 3 | **完了** |

### 2.6 統合・CLI

| ID | タスク | 優先度 | 見積 | Sprint | 状態 |
|----|--------|--------|------|--------|------|
| T-040 | メイン処理パイプライン統合 | 高 | 0.5d | 4 | **完了** |
| T-041 | CLI インターフェース（argparse） | 高 | 0.5d | 4 | **完了** |
| T-042 | 複数ファイル一括処理（--input-dir） | 中 | 0.5d | 4 | 未着手 |

### 2.7 デプロイ・Git連携（追加）

| ID | タスク | 優先度 | 見積 | Sprint | 状態 |
|----|--------|--------|------|--------|------|
| T-060 | Git 初期化・GitHub 連携 | 高 | 0.25d | 4 | **完了** |
| T-061 | Railway デプロイ設定（Procfile, runtime.txt） | 高 | 0.5d | 4 | **完了** |
| T-062 | デプロイ手順ドキュメント（Railway, GitHub） | 中 | 0.5d | 4 | **完了** |

### 2.8 テスト・運用

| ID | タスク | 優先度 | 見積 | Sprint | 状態 |
|----|--------|--------|------|--------|------|
| T-050 | 単体テスト（入力・出力・Slack mock） | 中 | 1d | 4 | 未着手 |
| T-051 | サンプル書き起こしでE2Eテスト | 高 | 0.5d | 4 | **完了**（scripts/run_all_tests.py 等） |
| T-052 | ログ出力・実行履歴 | 低 | 0.25d | 4 | 未着手 |
| T-053 | README・運用ドキュメント整備 | 中 | 0.5d | 4 | **完了** |

---

## 3. 依存関係

```
T-001 ──┬── T-002, T-003
        ├── T-010, T-011
        └── T-004, T-005

T-002, T-003 ──▶ T-012
T-012 ──▶ T-020, T-021
T-020, T-021 ──▶ T-022 ──▶ T-023
T-022 ──▶ T-030, T-031 ──▶ T-032, T-033, T-034
T-023, T-034 ──▶ T-040 ──▶ T-041, T-042
T-041 ──▶ T-050, T-051

【追加】
T-030 ──▶ T-035 ──▶ T-036, T-037  （Slack /fb）
T-040 ──▶ T-060 ──▶ T-061, T-062  （デプロイ）
```

---

## 4. 優先順位の考え方

1. **必須**: 入力→FB生成→Slack送信の一連フロー → **完了**
2. **高**: Slack /fb 全員利用・デプロイ → **完了**
3. **中**: 一括処理（--input-dir）、単体テスト → 未着手
4. **低**: 履歴保存、高度な整形 → 未着手

---

## 5. 受け入れ条件（サマリ）

- [x] 書き起こしを渡すとFBが生成される
- [x] FBがSlackに送信される
- [x] PSS・オペレーションマニュアルを参照してFBが生成される
- [x] 設定で送信先・モデルを変更できる
- [x] Slack の /fb コマンドで全員が利用可能
- [ ] 複数ファイル一括処理（--input-dir）
