# 要件定義

## 1. 概要

人材紹介初回面談の書き起こしから営業FBを自動生成し、Slackへ送信するシステムの要件を定義する。

## 2. 機能要件

### 2.1 入力

| ID | 要件 | 優先度 | 備考 |
|----|------|--------|------|
| REQ-001 | 初回面談の書き起こしテキストを受け付ける | 必須 | テキスト形式（.txt, .md等） |
| REQ-002 | 複数形式の書き起こし形式に対応する | 高 | 議事録形式・逐語録形式など |
| REQ-003 | メタデータ（面談日、担当者等）を付与できる | 中 | 任意 |

### 2.2 FB生成

| ID | 要件 | 優先度 | 備考 |
|----|------|--------|------|
| REQ-010 | PSSマニュアルに基づいてFBを生成する | 必須 | reference/pss/ を参照 |
| REQ-011 | オペレーションマニュアルに基づいてFBを生成する | 必須 | reference/operations/ を参照 |
| REQ-012 | 書き起こしの内容を解析し、該当箇所を具体的に指摘する | 必須 | 「〇〇分頃の～」等 |
| REQ-013 | 良い点・改善点・ニーズの整理・意思決定6カテゴリ・年収相場との整合性・障壁・総評・残論点を構造化して出力する | 必須 | マークダウン形式 |
| REQ-014 | FBのトーンを統一する（建設的・具体的） | 高 | プロンプトで制御 |

### 2.3 Slack連携

| ID | 要件 | 優先度 | 備考 |
|----|------|--------|------|
| REQ-020 | 生成したFBをSlackに送信する | 必須 | 指定チャンネルまたはDM |
| REQ-021 | 送信先を設定可能にする | 必須 | 環境変数または設定ファイル |
| REQ-022 | 送信失敗時にリトライまたは通知する | 高 | エラーハンドリング |
| REQ-023 | メンション（@user）を付与できる | 中 | 任意 |
| REQ-024 | Slack /fb スラッシュコマンドでメンバー全員がFB生成可能 | 必須 | Slack Bolt + Socket Mode |

### 2.4 運用

| ID | 要件 | 優先度 | 備考 |
|----|------|--------|------|
| REQ-030 | 手動実行・バッチ実行の両方に対応する | 高 | CLI / Cron 等 |
| REQ-031 | 実行ログを記録する | 中 | 日時・入力・出力概要 |
| REQ-032 | FB履歴を保存できる（任意） | 低 | data/feedback/ |

## 3. 非機能要件

### 3.1 パフォーマンス

| ID | 要件 | 目標 |
|----|------|------|
| NFR-001 | 1件の書き起こし（〜30分相当）のFB生成 | 2分以内 |
| NFR-002 | Slack送信 | 5秒以内 |

### 3.2 セキュリティ

| ID | 要件 |
|----|------|
| NFR-010 | 書き起こし・FBは社内のみで扱う |
| NFR-011 | APIキー・トークンは環境変数で管理 |
| NFR-012 | PSS・オペレーションマニュアルはリポジトリ外に置く選択肢を許容 |

### 3.3 可用性・保守性

| ID | 要件 |
|----|------|
| NFR-020 | 既存のAI/LLM API（例: OpenAI, Anthropic）を利用可能 |
| NFR-021 | 設定変更でモデル・プロンプトを切り替え可能 |

## 4. 制約事項

- 書き起こしの文字数上限: 目安 50,000文字（〜60分面談相当）
- Slack APIのレート制限に準拠
- PSS・オペレーションマニュアルは必ず最新版を参照する運用

## 5. 受け入れ基準

- [x] 書き起こしを入力すると、PSS・オペレーションマニュアルに沿ったFBが生成される
- [x] 生成したFBがSlackに送信される
- [x] 送信先・プロンプト・モデルが設定で変更可能
- [x] Slack の /fb コマンドでメンバー全員がFB生成を利用可能
